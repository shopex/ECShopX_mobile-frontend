(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"395":function(e,t,r){},"396":function(e,t,r){"use strict";r.d(t,"a",function(){return _});var a,n,i=r(2),c=r(3),o=r.n(c),s=r(595),l=r(208),u=r(28),d=r(349),m=(r(395),function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}());var _=(n=a=function(e){function OrderItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OrderItem.__proto__||Object.getPrototypeOf(OrderItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OrderItem,i["Component"]),m(OrderItem,[{"key":"render","value":function render(){var e=this.props,t=e.info,r=e.onClick;return o.a.createElement(s.a,{"className":"order-item","onClick":r},o.a.createElement(s.a,{"className":"order-item__hd"},o.a.createElement(l.a,{"mode":"aspectFill","className":"order-item__img","src":t.pic_path})),o.a.createElement(s.a,{"className":"order-item__bd"},o.a.createElement(u.a,{"className":"order-item__title"},t.title),o.a.createElement(u.a,{"className":"order-item__desc"},t.goods_props)),o.a.createElement(s.a,{"className":"order-item__ft"},o.a.createElement(d.f,{"className":"order-item__price","value":t.price}),o.a.createElement(u.a,{"className":"order-item__num"},"x ",t.num)))}}]),OrderItem}(),a.defaultProps={"onClick":function onClick(){}},n)},"414":function(e,t,r){},"560":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return h});var a=r(2),n=r.n(a),i=r(3),c=r.n(i),o=r(595),s=r(28),l=r(208),u=r(551),d=r(349),m=r(31),_=r(32),f=r(396),p=(r(414),function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}());function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function step(a,n){try{var i=t[a](n),c=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}var h=function(e){function TradeDetail(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TradeDetail);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(TradeDetail.__proto__||Object.getPrototypeOf(TradeDetail)).call(this,e));return r.handleCopy=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,a;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=r.state.info,a="收货人："+e.receiver_name+" "+e.receiver_mobile+"\n收货地址："+e.receiver_state+e.receiver_city+e.receiver_district+e.receiver_address+"\n订单编号："+e.tid+"\n创建时间："+e.created_time_str+"\n",t.next=4,Object(m.b)(a);case 4:case"end":return t.stop()}},_callee,t)})),r.state={"info":null},r}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(TradeDetail,a["Component"]),p(TradeDetail,[{"key":"componentDidMount","value":function componentDidMount(){this.fetch()}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r,a;return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return e=this.$router.params.id,n.next=3,_.a.trade.detail(e);case 3:t=n.sent,console.log(t.orderInfo),r=Object(m.k)(t.orderInfo,{"tid":"order_id","created_time_str":function created_time_str(e){var t=e.created_time;return Object(m.d)(t,"YYYY-MM-DD hh:mm:ss")},"receiver_name":"receiver_name","receiver_mobile":"receiver_mobile","receiver_state":"receiver_state","receiver_city":"receiver_city","receiver_district":"receiver_district","receiver_address":"receiver_address","status_desc":"order_status_msg","post_fee":function post_fee(e){return(+e.freight_fee/100).toFixed(2)},"payment":function payment(e){return(+e.total_fee/100).toFixed(2)},"status":function status(e){var t=e.order_status;return Object(m.l)(t)},"orders":function orders(e){var t=e.items;return Object(m.k)(t,{"order_id":"order_id","item_id":"item_id","pic_path":"pic","title":"item_name","price":function price(e){return(+e.item_fee/100).toFixed(2)},"num":"num"})}}),a=(r.status||"").toLowerCase(),r.status_img="ico_"+("trade_success"===a?"wait_rate":a)+".png",this.setState({"info":r});case 9:case"end":return n.stop()}},_callee2,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"handleClickBtn","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){return regeneratorRuntime.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:"pay"===e&&n.a.navigateTo({"url":"/pages/cashier/index?order_id="+trade.tid});case 1:case"end":return t.stop()}},_callee3,this)}));return function handleClickBtn(t){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this.state.info;return e?c.a.createElement(o.a,{"className":Object(m.a)("trade-detail","trade-detail__status-"+e.status)},c.a.createElement(o.a,{"className":"trade-detail__status"},c.a.createElement(s.a,{"className":"trade-detail__status-text"},e.status_desc),c.a.createElement(l.a,{"mode":"aspectFill","className":"trade-detail__status-ico","src":"/assets/imgs/trade/"+e.status_img})),c.a.createElement(o.a,{"className":"trade-detail__addr"},c.a.createElement(d.h,{"icon":"map-pin"},c.a.createElement(o.a,{"className":"address-info__bd"},c.a.createElement(s.a,{"className":"address-info__receiver"},"收货人：",e.receiver_name," ",e.receiver_mobile),c.a.createElement(s.a,{"className":"address-info__addr"},"收货地址：",e.receiver_state,e.receiver_city,e.receiver_district,e.receiver_address))),e.shipping_type_name&&c.a.createElement(o.a,{"className":"trade-detail__express"},"配送方式：",e.shipping_type_name)),c.a.createElement(o.a,{"className":"sec sec-orders"},e.shop_name&&c.a.createElement(o.a,{"className":"sec-orders__hd"},c.a.createElement(s.a,null,e.shop_name)),c.a.createElement(o.a,{"className":"sec-orders__bd"},e.orders.map(function(e,t){return c.a.createElement(f.a,{"key":t,"info":e})}),c.a.createElement(o.a,{"className":"trade-detail__total"},c.a.createElement(d.h,{"className":"trade-detail__total-item","title":"运费","border":!1},c.a.createElement(d.f,{"value":e.post_fee})),e.points_fee&&c.a.createElement(d.h,{"className":"trade-detail__total-item","title":"积分","border":!1},c.a.createElement(d.f,{"value":"-"+e.points_fee})),c.a.createElement(d.h,{"className":"trade-detail__total-item","title":"实付款(含运费)","border":!1},c.a.createElement(d.f,{"primary":!0,"value":e.payment}))))),c.a.createElement(o.a,{"className":"sec trade-extra"},c.a.createElement(o.a,{"className":"trade-extra__bd"},c.a.createElement(s.a,null,"订单编号：",e.tid),c.a.createElement(s.a,null,"创建时间：",e.created_time_str)),c.a.createElement(o.a,{"className":"trade-extra__ft"},c.a.createElement(u.a,{"size":"small","onClick":this.handleCopy},"复制"))),"WAIT_BUYER_PAY"===e.status&&c.a.createElement(o.a,{"className":"toolbar toolbar-actions"},c.a.createElement(u.a,{"circle":!0,"type":"secondary","onClick":this.handleClickBtn.bind(this,"pay")},"立即支付")),"WAIT_BUYER_CONFIRM_GOODS"===e.status&&c.a.createElement(o.a,{"className":"toolbar toolbar-actions"},c.a.createElement(u.a,{"circle":!0,"type":"secondary","onClick":this.handleClickBtn.bind(this,"confirm")},"确认收货")),"WAIT_RATE"===e.status&&c.a.createElement(o.a,{"className":"toolbar toolbar-actions"},c.a.createElement(u.a,{"circle":!0,"type":"secondary","onClick":this.handleClickBtn.bind(this,"rate")},"评价")),c.a.createElement(d.m,null)):c.a.createElement(d.e,null)}},{"key":"componentDidShow","value":function componentDidShow(){}}]),TradeDetail}()}}]);