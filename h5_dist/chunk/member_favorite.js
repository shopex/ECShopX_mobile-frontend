(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"443":function(e,t,n){},"570":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});var o,r,a=n(2),i=n.n(a),c=n(3),l=n.n(c),s=n(595),u=n(207),f=n(28),m=n(589),d=n(551),h=n(349),p=n(32),v=n(31),b=n(6),y=(n(443),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),g=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var k=(r=o=function(e){function MemberFavorite(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MemberFavorite);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(MemberFavorite.__proto__||Object.getPrototypeOf(MemberFavorite)).call(this,e));return t.handleGoBack=function(){t.toggleMode("default"),i.a.navigateBack()},t.handleDelect=function(){var e=t.state.selection,n=[].concat(function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e));if(n.length<=0)return b.a.toast("请选择要删除的内容");console.log(n)},t.state=y({},t.state,{"list":[],"selection":new Set,"mode":"default"}),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MemberFavorite,a["Component"]),g(MemberFavorite,[{"key":"componentDidMount","value":function componentDidMount(){this.fetch()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"fetch","value":function(){var e=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(o,r){try{var a=t[o](r),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.member.favoriteItems();case 2:e=n.sent,(t=e.list).forEach(function(e){e.price=e.goods_price,e.title=e.goods_name}),this.setState({"list":t});case 6:case"end":return n.stop()}},_callee,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"toggleMode","value":function toggleMode(e){void 0===e&&(e="edit"!==this.state.mode?"edit":"default"),this.setState({"mode":e})}},{"key":"handleSelectionChange","value":function handleSelectionChange(e,t){this.state.selection[t?"add":"delete"](e);var n=new Set(this.state.selection);this.setState({"selection":n})}},{"key":"render","value":function render(){var e=this,t=this.state,n=t.list,o=t.mode,r=t.selection,a=r.size;return l.a.createElement(s.a,{"className":Object(v.a)("member-favorite","edit"===o?"member-favorite__edit":null)},l.a.createElement(m.a,{"fixed":!0,"leftIconType":"chevron-left","rightFirstIconType":"bullet-list","title":"我的收藏","onClickLeftIcon":this.handleGoBack,"onClickRgIconSt":function onClickRgIconSt(){return e.toggleMode()}}),l.a.createElement(u.a,{"className":"favorite-items__scroll","scrollY":!0},n.map(function(t){return l.a.createElement(h.d,{"key":t.item_id,"info":t,"onClick":e.onClickItem},"edit"==o&&l.a.createElement(h.i,{"key":t.item_id,"checked":r.has(t.item_id),"onChange":e.handleSelectionChange.bind(e,t.item_id)}))})),l.a.createElement(s.a,{"className":"toolbar"},l.a.createElement(s.a,{"className":"toolbar-hd"},l.a.createElement(f.a,null,"已选择",l.a.createElement(f.a,{"className":"lnk"},a),"项内容")),l.a.createElement(s.a,{"className":"toolbar-bd"},l.a.createElement(d.a,{"circle":!0,"type":"primary","className":"btn-checkout","onClick":this.handleDelect},"删除"))))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),MemberFavorite}(),o.options={"addGlobalClass":!0},r)}}]);