(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"463":function(e,n,t){},"591":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return g});var a=t(2),r=t.n(a),o=t(3),i=t.n(o),s=t(613),c=t(217),l=t(609),u=t(564),p=t(562),h=t(347),f=t(8),d=t(28),m=(t(463),Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}),b=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}();var g=function(e){function Login(e){var n=this;!function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,Login);var t,a=function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this,e));return a.handleClickReg=function(){r.a.navigateTo({"url":"/pages/auth/reg"})},a.handleSubmit=(t=function _asyncToGenerator(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function step(a,r){try{var o=n[a](r),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(e){var t,o,i,s,c;return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.detail.value,(o=m({},a.state.info,t)).username&&/1\d{10}/.test(o.username)){n.next=4;break}return n.abrupt("return",f.a.toast("请输入正确的手机号"));case 4:if(o.password){n.next=6;break}return n.abrupt("return",f.a.toast("请输入密码"));case 6:return n.prev=6,n.next=9,d.a.user.login(o);case 9:i=n.sent,s=i.token,f.a.setAuthToken(s),c=decodeURIComponent(a.$router.params.redirect||"/pages/home/index"),r.a.redirectTo({"url":c}),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(6),console.log(n.t0);case 19:case"end":return n.stop()}},_callee,n,[[6,16]])})),function(e){return t.apply(this,arguments)}),a.handleChange=function(e,n){a.state.info[e]=n},a.handleBlurMobile=function(e){a.setState({"info":{"username":e}})},a.handleClickIconpwd=function(){var e=a.state.isVisible;a.setState({"isVisible":!e})},a.handleErrorToastClose=function(){f.a.closeToast()},a.handleClickForgtPwd=function(){r.a.navigateTo({"url":"/pages/auth/forgotpwd"})},a.state={"info":{},"isVisible":!1},a}return function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(Login,a["Component"]),b(Login,[{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"render","value":function render(){var e=this.state,n=e.info,t=e.isVisible;return i.a.createElement(s.a,{"className":"auth-login"},i.a.createElement(h.f,{"title":"登录"}),i.a.createElement(s.a,{"className":"auth-login__reg"},i.a.createElement(c.a,{"onClick":this.handleClickReg},"快速注册")),i.a.createElement(l.a,{"onSubmit":this.handleSubmit},i.a.createElement(s.a,{"className":"sec auth-login__form"},i.a.createElement(u.a,{"title":"手机号码","name":"username","maxLength":11,"type":"number","value":n.username,"placeholder":"请输入手机号码","onFocus":this.handleErrorToastClose,"onChange":this.handleChange.bind(this,"username"),"onBlur":this.handleBlurMobile.bind(this)}),i.a.createElement(u.a,{"title":"密码","name":"password","type":t?"text":"password","value":n.password,"placeholder":"请输入密码","onFocus":this.handleErrorToastClose,"onChange":this.handleChange.bind(this,"password")},t?i.a.createElement(s.a,{"className":"sp-icon sp-icon-yanjing icon-pwd","onClick":this.handleClickIconpwd}," "):i.a.createElement(s.a,{"className":"sp-icon sp-icon-icon6 icon-pwd","onClick":this.handleClickIconpwd}," "),i.a.createElement(c.a,{"className":"forgotPwd","onClick":this.handleClickForgtPwd},"忘记密码"))),i.a.createElement(s.a,{"className":"btns"},i.a.createElement(p.a,{"type":"primary","onClick":this.handleSubmit,"formType":"submit"},"登录"))),i.a.createElement(h.n,null))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Login}()}}]);