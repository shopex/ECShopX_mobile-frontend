(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"455":function(e,t,n){},"574":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var a=n(2),r=n.n(a),o=n(3),i=n.n(o),s=n(595),c=n(28),l=n(592),u=n(552),p=n(551),h=n(349),f=n(6),d=n(32),m=(n(455),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),b=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var g=function(e){function Login(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Login);var n,a=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this,e));return a.handleClickReg=function(){r.a.navigateTo({"url":"/pages/auth/reg"})},a.handleSubmit=(n=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(a,r){try{var o=t[a](r),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(e){var n,o,i,s,c;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.detail.value,(o=m({},a.state.info,n)).username&&/1\d{10}/.test(o.username)){t.next=4;break}return t.abrupt("return",f.a.toast("请输入正确的手机号"));case 4:if(o.password){t.next=6;break}return t.abrupt("return",f.a.toast("请输入密码"));case 6:return t.prev=6,t.next=9,d.a.user.login(o);case 9:i=t.sent,s=i.token,f.a.setAuthToken(s),c=decodeURIComponent(a.$router.params.redirect||"/pages/home/index"),r.a.redirectTo({"url":c}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),f.a.toast(t.t0);case 19:case"end":return t.stop()}},_callee,t,[[6,16]])})),function(e){return n.apply(this,arguments)}),a.handleChange=function(e,t){a.state.info[e]=t},a.handleClickIconpwd=function(){var e=a.state.isVisible;a.setState({"isVisible":!e})},a.handleErrorToastClose=function(){f.a.closeToast()},a.handleClickForgtPwd=function(){r.a.navigateTo({"url":"/pages/auth/forgotpwd"})},a.state={"info":{},"isVisible":!1},a}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Login,a["Component"]),b(Login,[{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"render","value":function render(){var e=this.state,t=e.info,n=e.isVisible;return i.a.createElement(s.a,{"className":"auth-login"},i.a.createElement(s.a,{"className":"auth-login__reg","onClick":this.handleClickReg},"快速注册"),i.a.createElement(l.a,{"onSubmit":this.handleSubmit},i.a.createElement(s.a,{"className":"sec auth-login__form"},i.a.createElement(u.a,{"title":"手机号码","name":"username","maxLength":11,"value":t.mobile,"placeholder":"请输入手机号码","onFocus":this.handleErrorToastClose,"onChange":this.handleChange.bind(this,"username")}),i.a.createElement(u.a,{"title":"密码","name":"password","type":n?"text":"password","value":t.password,"placeholder":"请输入密码","onFocus":this.handleErrorToastClose,"onChange":this.handleChange.bind(this,"password")},n?i.a.createElement(s.a,{"className":"sp-icon sp-icon-yanjing icon-pwd","onClick":this.handleClickIconpwd}," "):i.a.createElement(s.a,{"className":"sp-icon sp-icon-icon6 icon-pwd","onClick":this.handleClickIconpwd}," "),i.a.createElement(c.a,{"className":"forgotPwd","onClick":this.handleClickForgtPwd},"忘记密码"))),i.a.createElement(s.a,{"className":"btns"},i.a.createElement(p.a,{"type":"primary","onClick":this.handleSubmit,"formType":"submit"},"登录"))),i.a.createElement(h.m,null))}},{"key":"componentDidShow","value":function componentDidShow(){}}]),Login}()}}]);