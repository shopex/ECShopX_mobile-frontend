<block>
    <block wx:if="{{!info}}">
        <loading __triggerObserer="{{ _triggerObserer }}"></loading>
    </block>
    <view class="trade-detail" wx:else>
        <nav-bar title="订单详情" __triggerObserer="{{ _triggerObserer }}" leftIconType="chevron-left" fixed="true"></nav-bar>
        <block wx:if="{{info.status === 'WAIT_BUYER_PAY'}}">
            <view class="{{anonymousState__temp}}">
                <view>该订单将为您保留
                    <at-countdown format="{{anonymousState__temp2}}" __triggerObserer="{{ _triggerObserer }}" minutes="{{timer.mm}}" seconds="{{timer.ss}}"></at-countdown>分钟</view>
            </view>
        </block>
        <block wx:if="{{info.status !== 'WAIT_BUYER_PAY'}}">
            <view class="{{anonymousState__temp3}}">
                <view class="trade-detail-waitdeliver">
                    <view></view>
                    <view class="delivery-infos">
                        <view class="delivery-infos__status"><text class="delivery-infos__text text-status">{{info.order_status_msg}}</text><text class="delivery-infos__text"><block><block wx:if="{{info.status === 'WAIT_SELLER_SEND_GOODS'}}">{{'物流信息：正在审核订单'}}</block><block wx:else><view></view></block></block><block><block wx:if="{{info.status === 'WAIT_BUYER_CONFIRM_GOODS'}}">{{'物流信息：正在派送中'}}</block><block wx:else><view></view></block></block><block><block wx:if="{{info.status === 'TRADE_CLOSED'}}">{{'订单已取消'}}</block><block wx:else><view></view></block></block><block><block wx:if="{{info.status === 'TRADE_SUCCESS'}}">{{'物流单号：' + info.delivery_code}}</block><block wx:else><view></view></block></block></text>
                        </view>
                    </view>
                </view>
            </view>
        </block>
        <view class="trade-detail-address" bindtap="handleClickDelivery" data-e-tap-so="this">
            <view class="address-receive"><text>收货地址：</text>
                <view class="info-trade">
                    <view class="user-info-trade"><text>{{info.receiver_name}}</text><text>{{info.receiver_mobile}}</text>
                    </view><text class="address-detail">{{info.receiver_state}}{{info.receiver_city}}{{info.receiver_district}}{{info.receiver_address}}</text>
                </view>
            </view>
        </view>
        <view class="trade-detail-goods">
            <detail-item info="{{info}}" __triggerObserer="{{ _triggerObserer }}"></detail-item>
        </view>
        <view class="trade-money">总计：<text class="trade-money__num">￥{{info.payment}}</text>
        </view>
        <view class="trade-detail-info"><text class="info-text">订单号：{{info.tid}}</text><text class="info-text">下单时间：{{info.created_time_str}}</text><text class="info-text">发票信息：上海xxx有限公司上海xx有</text><text class="info-text">商品金额：￥{{info.item_fee}}</text><text class="info-text">免运费：-￥{{info.freight_fee}}</text><text class="info-text">优惠：-￥{{info.coupon_discount}}</text><text class="info-text">支付：{{info.payment}}（微信支付）</text>
            <block wx:if="{{info.delivery_code}}">
                <view class="delivery_code_copy"><text class="info-text">物流单号：{{info.delivery_code}}</text><text class="info-text" bindtap="handleClickCopy" data-e-tap-so="this" data-e-tap-a-a="{{info.delivery_code}}">复制</text>
                </view>
            </block>
        </view>
        <block wx:if="{{info.status === 'WAIT_BUYER_PAY'}}">
            <view class="trade-detail__footer"><text class="trade-detail__footer__btn" bindtap="handleClickBtn" data-e-tap-so="this" data-e-tap-a-a="cancel">取消订单</text>
                <at-button className="trade-detail__footer__btn trade-detail__footer_active" __triggerObserer="{{ _triggerObserer }}" type="primary" loading="{{payLoading}}" bindonclick="handleClickBtn" __fn_onClick="{{true}}" data-e-onclick-so="this" data-e-onclick-a-a="pay">立即支付</at-button>
            </view>
        </block>
        <block wx:if="{{info.status === 'WAIT_SELLER_SEND_GOODS'}}">
            <view class="trade-detail__footer"><text class="trade-detail__footer__btn" bindtap="handleClickBtn" data-e-tap-so="this" data-e-tap-a-a="cancel">取消订单</text><text class="trade-detail__footer__btn trade-detail__footer_active" bindtap="handleClickBtn" data-e-tap-so="this" data-e-tap-a-a="home">继续购物</text>
            </view>
        </block>
        <block wx:if="{{info.status === 'WAIT_BUYER_CONFIRM_GOODS'}}">
            <view class="trade-detail__footer">
                <button open-type="contact" class="trade-detail__footer__btn">联系客服</button><text class="trade-detail__footer__btn trade-detail__footer_active" bindtap="handleClickBtn" data-e-tap-so="this" data-e-tap-a-a="confirm">确认收货</text>
            </view>
        </block>
        <block wx:if="{{info.status === 'TRADE_SUCCESS'}}">
            <view class="trade-detail__footer">
                <button open-type="contact" class="trade-detail__footer__btn trade-detail__footer_active trade-detail__footer_allWidthBtn">联系客服</button>
            </view>
        </block>
        <sp-toast __triggerObserer="{{ _triggerObserer }}"></sp-toast>
    </view>
</block>