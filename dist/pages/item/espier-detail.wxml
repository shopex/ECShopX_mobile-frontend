<block>
    <block wx:if="{{!info}}">
        <loading __triggerObserer="{{ _triggerObserer }}"></loading>
    </block>
    <view class="page-goods-detail" wx:else>
        <scroll-view class="goods-detail__wrap" scroll-y="{{true}}" scroll-top="{{scrollTop}}" scroll-with-animation="{{true}}" bindscroll="handleScroll">
            <view class="goods-imgs__wrap">
                <swiper class="goods-imgs__swiper" style="{{'height: ' + windowWidth + 'px'}}" bindchange="handleSwiperChange">
                    <swiper-item wx:key="idx" wx:for="{{loopArray0}}" wx:for-item="img" wx:for-index="idx">
                        <image src="{{img.$original}}" mode="aspectFill" style="{{img.$loopState__temp2}}"></image>
                    </swiper-item>
                </swiper>
                <block wx:if="{{imgs.length > 1}}"><text class="goods-imgs__text">{{curImgIdx + 1}}/ {{imgs.length}}</text>
                </block>
            </view>
            <block wx:if="{{timer}}">
                <view class="goods-timer">
                    <view class="goods-timer__hd">
                        <view class="goods-prices">
                            <price unit="cent" __triggerObserer="{{ _triggerObserer }}" symbol="{{info.cur.symbol}}" value="{{info.price}}"></price>
                            <view class="goods-prices__ft"><text class="goods-prices__type">团购</text>
                                <price unit="cent" __triggerObserer="{{ _triggerObserer }}" className="goods-prices__market" symbol="{{info.cur.symbol}}" value="{{info.mkt_price}}"></price>
                            </view>
                        </view>
                    </view>
                    <view class="goods-timer__bd"><text class="goods-timer__label">距结束还剩</text>
                        <at-countdown isShowDay="{{true}}" __triggerObserer="{{ _triggerObserer }}" day="{{timer.dd}}" hours="{{timer.hh}}" minutes="{{timer.mm}}" seconds="{{timer.ss}}"></at-countdown>
                    </view>
                </view>
            </block>
            <view class="goods-hd">
                <view class="goods-title__wrap"><text class="goods-title">{{info.item_name}}</text><text class="goods-title__desc">{{info.brief}}</text>
                </view>
                <block wx:if="{{marketing === 'normal'}}">
                    <view class="goods-prices__wrap">
                        <view class="goods-prices">
                            <price primary="{{true}}" __triggerObserer="{{ _triggerObserer }}" unit="cent" value="{{info.price}}"></price>
                            <block wx:if="{{info.approve_status !== 'only_show'}}">
                                <view class="goods-prices__market">
                                    <price unit="cent" __triggerObserer="{{ _triggerObserer }}" symbol="{{info.cur.symbol}}" value="{{info.mkt_price}}"></price>
                                </view>
                            </block>
                        </view>
                        <block wx:if="{{info.approve_status !== 'only_show'}}"><text class="goods-sold">{{info.sales || 0}}人已购</text>
                        </block>
                    </view>
                </block>
            </view>
            <block wx:if="{{isPromoter}}">
                <view class="goods-income">
                    <view class="sp-icon sp-icon-jifen"></view><text>预计收益：{{anonymousState__temp3}}</text>
                </view>
            </block>
            <view class="sec goods-sec-props">
                <view class="sec-hd"><text class="sec-title">商品参数</text>
                </view>
                <view class="sec-bd">
                    <view class="goods-props__wrap">
                        <view class="prop-item"><text class="prop-item__label">品牌：</text><text class="prop-item__cont">{{info.goods_brand || '--'}}</text>
                        </view>
                        <view class="prop-item"><text class="prop-item__label">颜色：</text><text class="prop-item__cont">{{info.goods_color || '--'}}</text>
                        </view>
                        <view class="prop-item"><text class="prop-item__label">功能：</text><text class="prop-item__cont">{{info.goods_function || '--'}}</text>
                        </view>
                        <view class="prop-item"><text class="prop-item__label">材质：</text><text class="prop-item__cont">{{info.goods_series || '--'}}</text>
                        </view>
                    </view>
                </view>
            </view>
            <view class="goods-sec-detail">
                <at-divider content="宝贝详情" __triggerObserer="{{ _triggerObserer }}"></at-divider>
                <sp-html-content className="goods-detail__content" __triggerObserer="{{ _triggerObserer }}" content="{{desc}}"></sp-html-content>
            </view>
        </scroll-view>
        <back-to-top bottom="{{150}}" __triggerObserer="{{ _triggerObserer }}" show="{{showBackToTop}}" bindonclick="scrollBackToTop" __fn_onClick="{{true}}"></back-to-top>
        <goods-buy-toolbar type="{{marketing}}" __triggerObserer="{{ _triggerObserer }}" bindonclickaddcart="handleBuyClick" bindonclickfastbuy="handleBuyClick" __fn_onClickAddCart="{{true}}" data-e-onclickaddcart-so="this" data-e-onclickaddcart-a-a="cart" __fn_onClickFastBuy="{{true}}" data-e-onclickfastbuy-so="this" data-e-onclickfastbuy-a-a="fastbuy"></goods-buy-toolbar>
        <sp-toast __triggerObserer="{{ _triggerObserer }}"></sp-toast>
    </view>
</block>