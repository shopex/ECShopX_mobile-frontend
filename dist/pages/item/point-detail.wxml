<block>
    <block wx:if="{{!info}}">
        <loading __triggerObserer="{{ _triggerObserer }}"></loading>
    </block>
    <view class="page-goods-detail" wx:else>
        <nav-bar title="{{info.item_name}}" __triggerObserer="{{ _triggerObserer }}" leftIconType="chevron-left" fixed="true"></nav-bar>
        <scroll-view class="goods-detail__wrap" scroll-y="{{true}}" scroll-top="{{scrollTop}}" scroll-with-animation="{{true}}" bindscroll="handleScroll">
            <view class="goods-imgs__wrap">
                <swiper class="goods-imgs__swiper" style="{{'height: ' + windowWidth + 'px'}}" current="{{curImgIdx}}" bindchange="handleSwiperChange">
                    <swiper-item wx:key="idx" wx:for="{{loopArray0}}" wx:for-item="img" wx:for-index="idx">
                        <image src="{{img.$original}}" mode="aspectFill" style="{{img.$loopState__temp2}}"></image>
                    </swiper-item>
                </swiper>
                <block wx:if="{{imgs.length > 1}}"><text class="goods-imgs__text">{{curImgIdx + 1}}/ {{imgs.length}}</text>
                </block>
            </view>
            <view class="goods-hd">
                <view class="goods-title__wrap"><text class="goods-title">{{info.item_name}}</text><text class="goods-title__desc">{{info.brief}}</text>
                </view>
                <view class="goods-prices__wrap">
                    <view class="goods-prices">
                        <price primary="{{true}}" __triggerObserer="{{ _triggerObserer }}" noSymbol="{{true}}" noDecimal="{{true}}" showMarketPrice="{{false}}" appendText="积分" value="{{info.point}}"></price>
                    </view>
                    <block wx:if="{{info.approve_status !== 'only_show'}}"><text class="goods-sold">{{info.sales || 0}}人已购</text>
                    </block>
                </view>
            </view>
            <view class="sec goods-sec-props">
                <view class="sec-hd"><text class="sec-title">商品参数</text>
                </view>
                <view class="sec-bd">
                    <view class="goods-props__wrap">
                        <view class="prop-item"><text class="prop-item__label">品牌：</text><text class="prop-item__cont">{{info.goods_brand || '--'}}</text>
                        </view>
                        <view class="prop-item"><text class="prop-item__label">颜色：</text><text class="prop-item__cont">{{info.goods_color || '--'}}</text>
                        </view>
                        <view class="prop-item"><text class="prop-item__label">功能：</text><text class="prop-item__cont">{{info.goods_function || '--'}}</text>
                        </view>
                        <view class="prop-item"><text class="prop-item__label">材质：</text><text class="prop-item__cont">{{info.goods_series || '--'}}</text>
                        </view>
                    </view>
                </view>
            </view>
            <view class="goods-sec-detail">
                <at-divider content="宝贝详情" __triggerObserer="{{ _triggerObserer }}"></at-divider>
                <sp-html-content className="goods-detail__content" __triggerObserer="{{ _triggerObserer }}" content="{{desc}}"></sp-html-content>
            </view>
        </scroll-view>
        <back-to-top bottom="{{150}}" __triggerObserer="{{ _triggerObserer }}" show="{{showBackToTop}}" bindonclick="scrollBackToTop" __fn_onClick="{{true}}"></back-to-top>
        <view class="goods-buy-toolbar">
            <view class="goods-buy-toolbar__btns">
                <button class="goods-buy-toolbar__btn btn-fast-buy" bindtap="handleBuyClick" data-e-tap-so="this" data-e-tap-a-a="fastbuy">立即购买</button>
            </view>
        </view>
        <sp-toast __triggerObserer="{{ _triggerObserer }}"></sp-toast>
    </view>
</block>