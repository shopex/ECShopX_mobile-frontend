"use strict";exports.__esModule=!0,exports.default=createMigrate;var _constants=require("./constants.js");function createMigrate(i,r){(r||{}).debug;return function(r,e){if(!r)return Promise.resolve(void 0);var t=r._persist&&void 0!==r._persist.version?r._persist.version:_constants.DEFAULT_VERSION;if(t===e)return Promise.resolve(r);if(e<t)return Promise.resolve(r);var s=Object.keys(i).map(function(r){return parseInt(r)}).filter(function(r){return r<=e&&t<r}).sort(function(r,e){return r-e});try{var n=s.reduce(function(r,e){return i[e](r)},r);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}}