"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_createClass=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),_get=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,n,r)}if("value"in o)return o.value;var l=o.get;return void 0!==l?l.call(r):void 0},_index=require("../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_index3=require("../../utils/index.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Timer=(_temp2=_class=function(t){function l(){var t,e,n;_classCallCheck(this,l);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=n=_possibleConstructorReturn(this,(t=l.__proto__||Object.getPrototypeOf(l)).call.apply(t,[this].concat(o)))).$usedState=["anonymousState__temp","msg","countDur","sent","duration","__fn_onStart","timerMsg","className","defaultMsg"],n.handleClick=function(){n.timer||(n.timer||n.start(),n.setState({sent:!0}))},n.start=function(){n.stop();n.__triggerPropsFn("onStart",[null].concat([function(t){!1!==t&&!function e(){n.timer=setTimeout(function(){var t=n.state.countDur-1;n.props.onUpdateTimer&&n.__triggerPropsFn("onUpdateTimer",[null].concat([t])),n.setState({countDur:t}),0<t?e():(n.stop(),n.setState({countDur:n.props.duration}),n.props.onStop&&n.__triggerPropsFn("onStop",[null].concat([])))},1e3)}()},n.state.countDur]))},n.$$refs=[],_possibleConstructorReturn(n,e)}return _inherits(l,_index.Component),_createClass(l,[{key:"_constructor",value:function(t){_get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"_constructor",this).call(this,t),this.state={countDur:t.duration,sent:!1}}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"stop",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"_createData",value:function(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};arguments[2];var t=this.timer,e=this.__state,n=e.countDur,r=e.sent,o=this.__props,s=o.timerMsg,l=o.className,u=s||(t?n+"s":r?this.__props.msg:this.__props.defaultMsg),a=(0,_index3.classNames)("mobile-timer",{"mobile-timer__counting":t},l);return Object.assign(this.__state,{anonymousState__temp:a,msg:u}),this.__state}}]),l}(),_class.properties={onUpdateTimer:{type:null,value:null},__fn_onUpdateTimer:{type:null,value:null},duration:{type:null,value:null},onStop:{type:null,value:null},__fn_onStop:{type:null,value:null},__fn_onStart:{type:null,value:null},timerMsg:{type:null,value:null},className:{type:null,value:null},msg:{type:null,value:null},defaultMsg:{type:null,value:null}},_class.$$events=["handleClick"],_class.options={addGlobalClass:!0},_class.defaultProps={duration:60,defaultMsg:"发送验证码",msg:"重新发送"},_temp2);exports.default=Timer,Component(require("../../npm/@tarojs/taro-weapp/index.js").default.createComponent(Timer));