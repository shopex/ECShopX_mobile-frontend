<block>
    <view class="{{anonymousState__temp}}">
        <block>
            <block wx:if="{{mode !== 'edit'}}">
                <at-nav-bar leftIconType="chevron-left" __triggerObserer="{{ _triggerObserer }}" rightFirstIconType="add-circle" title="选择地址" bindonclicklefticon="handleGoBack" bindonclickrgiconst="enterEdit" __fn_onClickLeftIcon="{{true}}" __fn_onClickRgIconSt="{{true}}" data-e-onclickrgiconst-so="this"></at-nav-bar>
            </block>
            <block wx:else>
                <at-nav-bar leftIconType="chevron-left" __triggerObserer="{{ _triggerObserer }}" title="编辑地址" bindonclicklefticon="exitEdit" __fn_onClickLeftIcon="{{true}}"></at-nav-bar>
            </block>
        </block>
        <block>
            <block wx:if="{{mode !== 'edit'}}">
                <view>
                    <block wx:if="{{anonymousState__temp2}}">
                        <view class="sec">
                            <sp-cell isLink="{{true}}" __triggerObserer="{{ _triggerObserer }}" iconPrefix="sp-icon" icon="weixin" title="获取微信收货地址" bindonclick="handleRetrieveWxAddress" __fn_onClick="{{true}}"></sp-cell>
                        </view>
                    </block>
                    <view class="sec address-list">
                        <sp-cell wx:key="address_id" __triggerObserer="{{ _triggerObserer }}" bindonclick="handleClickAddress" wx:for="{{list}}" wx:for-item="item" wx:for-index="_anonIdx" __fn_onClick="{{true}}" data-e-onclick-so="this" data-e-onclick-a-a="{{item}}">
                            <view class="address-item"><text class="address-item__receiver"><text class="address-item__name">{{item.username}}</text><text class="address-item__mobile">{{item.telephone}}</text><text class="address-item__addr">{{item.province}}{{item.city}}{{item.county}}{{item.adrdetail}}</text></text><text class="address-item__ft" catchtap="enterEdit" data-e-tap-so="this" data-e-tap-a-a="{{item}}">编辑</text>
                            </view>
                        </sp-cell>
                    </view>
                    <block wx:if="{{list.length === 0}}">
                        <sp-note img="address_empty.png" __triggerObserer="{{ _triggerObserer }}">赶快添加新地址吧~</sp-note>
                    </block>
                </view>
            </block>
            <block wx:else>
                <address-edit value="{{curAddress}}" __triggerObserer="{{ _triggerObserer }}" bindonchange="handleSaveAddress" bindondelete="handleDelAddress" bindonclose="exitEdit" __fn_onChange="{{true}}" __fn_onDelete="{{true}}" __fn_onClose="{{true}}"></address-edit>
            </block>
        </block>
        <sp-toast __triggerObserer="{{ _triggerObserer }}"></sp-toast>
    </view>
</block>